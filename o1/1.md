## 問題
**命題**：\(A\) を実 \(n\times n\) 行列とする。もし \(A^2 = A\) が成り立つならば、\(A\) は零行列 \(O\) か恒等行列 \(I\) のいずれかである。

---

## 証明

以下、\(\mathbb{R}^{n\times n}\) を実 \(n\times n\) 行列全体の集合とし、単位行列を \(I\)、零行列を \(O\) と表す。また \(\mathrm{rank}(A)\) は行列 \(A\) の階数を表す。

1. **予備知識：行列の冪等性と最小多項式**

   行列 \(A\) が冪等（べきとう）である、すなわち
   \[
     A^2 = A
   \]
   を満たすとき、\(A\) の最小多項式 \(m_A(x)\) は
   \[
     x^2 - x = x(x - 1)
   \]
   を割り切る。実際、
   \[
     A^2 - A = A(A - I) = O
   \]
   となるから、\(\displaystyle x(x-1)\) が \(A\) によって零化される多項式である。さらに \(\displaystyle x(x-1)\) は重根を持たないため、最小多項式は相異なる一次式の積として表される。これは \(A\) が対角化可能であることを示唆する。

2. **対角化可能性の議論**

   上記の議論より、\(A\) は実数体上で対角化可能であり、その固有値は \(0\) と \(1\) のみである。すなわち、適当な可逆行列 \(P\) を用いて
   \[
     P^{-1} A P = D = 
       \begin{pmatrix}
         \lambda_1 & 0 & \cdots & 0 \\
         0 & \lambda_2 & \cdots & 0 \\
         \vdots & \vdots & \ddots & \vdots \\
         0 & 0 & \cdots & \lambda_n
       \end{pmatrix}
   \]
   となり、各固有値 \(\lambda_i \in \{0,1\}\) である。

3. **固有値の一貫性に関する考察**

   次に、\(A\) に 0 の固有値と 1 の固有値が混在している場合を考える。任意の非零ベクトル \(\boldsymbol{v}\) を取れば、\(A\boldsymbol{v} \neq O\) となる可能性がある一方、固有値が 0 の成分を持つ対角要素が存在すれば、その成分に対応する固有ベクトルを入力とした際には出力が零ベクトルになる。ところが、ここで次のように論じることができる。

   - \(A\) が \(A^2 = A\) を満たすためには、ベクトルの像（イメージ）に含まれるすべてのベクトルは再度 \(A\) を作用させても変化しない（すなわち、像空間全体が \(A\) の不変部分空間である）。
   - いったん \(A\) の像に属したベクトルは、もう一度 \(A\) を作用させても変化しないことから、固有値が 1 の部分空間に属すると考えられる。
   - しかし同時に、固有値 0 の部分空間に属する任意のベクトルは \(A\) を作用させるとゼロに写るため、像空間をさらに縮める要因となる。

   上記２つの性質が同時に成り立つ場合、厳密には像空間が 0 と 1 の固有値空間間で連続に結合される（あるいはどちらも含む）とすると、対角成分に 0 と 1 が混在したまま冪等性を保つことが困難になる。特に、ある次元の固有空間が 0 に対応し、別の次元が 1 に対応するという状況では、\(A\) の自己合成によって一貫した像空間が保たれないと見るのが自然である。

4. **最終的な結論**

   以上の対角化可能性および像空間の不変性に関する議論をまとめると、\(A\) には 0 と 1 の固有値が混在することはなく、すべて 0 か、あるいはすべて 1 である。したがって、行列 \(A\) は
   \[
     A = P D P^{-1}
   \]
   であり、\(D\) がすべて 0 かすべて 1 しか持たない対角行列であるため、
   \[
     D = O \quad \text{または}\quad D = I
   \]
   となる。よって \(A\) もまた
   \[
     A = O \quad \text{または}\quad A = I
   \]
   しか取り得ない。以上により、命題が示された。

\(\boxed{}\)
